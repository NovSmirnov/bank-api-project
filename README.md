# bank-api-project
Первый этап создания API для банка.
Создана база данных PostgreSQL (Дамп базы banking.txt находится в папке scr/main/resources)
Скрин первой таблицы прикладываю:

![DbFirstCommit](https://user-images.githubusercontent.com/94735019/204122675-4717dfcc-c081-434f-88ff-320e8a467376.JPG)

Скрин второй таблицы:

![Table2](https://user-images.githubusercontent.com/94735019/209477450-a98e6a7e-4b4e-477b-8174-d950acb8e39d.JPG)

где внешний ключ id - это ссылка на id клиента

API содержат, на данном этапе, 3 REST запроса(в примере сервер находится на локальной машине), все запросы и ответы в формате простых строк (не JSON):

-) POST по адресу http://localhost:8080/balance с телом в формате простой строки, содержащей номер id клиента банка,
при корректном выполнении получаем одну строку с суммой баланса пользователя, при некорректном выполнеии получаем в первой строке -1,
во второй строке причину ошибки;

-) PUT по адресу http://localhost:8080/income с телом в формате двух строк, первая содержит id клиента, вторая сумму, предназначенную для зачисления на счёт.
При неудачном выполнении операции происходит возврат двух строк, как и в предыдущем пункте, при корректном выполнении получаем 0;

-) PUT по адресу http://localhost:8080/outcome с телом в формате двух строк, первая содержит id клиента, вторая сумму, предназначенную для снятия со счёта.
При неудачном выполнении операции происходит возврат двух строк, как и в предыдущем пункте, в том числе выводится сообщение о недостатке средств на счёте.

На этапах 2 и 3 добавлено:

-) POST по адресу http://localhost:8080/operation_list с телом в формате JSON:

{

    "clientId": 1,
    
    "firstDate": "2022-10-01",
    
    "lastDate": "2022-12-31"
    
}

Возвращается JSON списка объектов класса класса TransactionDto c информацией об операциях клиента, в JSON запроса могут отсутствовать либо одна из дат, либо обе.
В этом случае вывод будет выполен согласно заданию.


-) POST по адресу http://localhost:8080/transfer_money с телом в формате JSON:

{

    "firstClientId": 1,
    
    "secondClientId": 2,
    
    "money": 500
    
}

где firstClientId - это первый клиент, у которого деньги списываются, а secondClientId - это второй, которому деньги зачисляются. money - сумма перевода

В случае ушпешного выполнения перевода возвращается "0", неудача -1 и причина второй строкой, в том числе нехватка средств на счету первого клиента.

Во время такого перевода у клиентов изменяется размер средств на счету, создаётся 2 операции и запись в третьей таблице, во ссылкой на эти операции, что обе они

являются частью одного перевода от клиента к клиенту. В дальнейшем это может понадобиться для того, чтобы можно установить обоих контрагентов перевода.










